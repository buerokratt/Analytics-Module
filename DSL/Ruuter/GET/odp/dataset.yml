getKey:
  call: http.post
  args:
    url: http://resql:8082/get-odp-settings
  result: settings
  
authenticate:
  call: http.post
  args:
    url: http://open_data_service:8888/api/auth/key-login
    headers:
      X-API-KEY: ${settings.response.body[0].odpKey}
  result: apiToken


  #url: http://open_data_service:8888/api/organizations/my-organization/${settings.response.body[0].orgId}/datasets/${incoming.params.datasetId}
get_dataset_metadata:
  call: reflect.mock
  args:
    response:
      nameEt: 'mock'
      nameEn: 'mock'
      descriptionEt: 'mock'
      descriptionEn: 'mock'
      maintainer: 'mock'
      maintainerEmail: 'mock'
      regionIds: [1]
      keywordIds: [12777]
      categoryIds: [13]
      updateIntervalUnit: 'day'
      updateIntervalFrequency: 1
      dataFrom: 'Thu, 16 Feb 2023 14:51:33 GMT'
      access: 'public'
      licenceId: 1
  result: dataset

return:
  return: ${dataset.response.body}
